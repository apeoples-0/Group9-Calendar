<!DOCTYPE html>
<!-- Calendar Base Page -->
<html>
	<head>
	<meta charset='utf-8' />
	<!-- Script tags taken from fullcalendar bundle included with files now -->
    <link href='../static/fullcalendar/lib/main.css' rel='stylesheet' />
    <script src='../static/fullcalendar/lib/main.js'></script>
  <!-- Font Awesome -->
    <link href="../static/fontawesome/css/all.css" rel="stylesheet">
  <!-- Bootstrap -->
    <script src='../static/bootstrap/jquery-3.6.0.min.js'></script>
    <script src='../static/bootstrap/popper.min.js'></script>
    <script src='../static/bootstrap/moment.min.js'></script>
    <link href='../static/bootstrap/bootstrap.min.css' rel='stylesheet' />
    <script src='../static/bootstrap/bootstrap.min.js'></script>
    <script src='../static/bootstrap/tempusdominus-bootstrap-4.min.js'></script>
    <link href='../static/bootstrap/tempusdominus-bootstrap-4.min.css' rel='stylesheet'/>
  <!-- Calendar initialization -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          customButtons: {
            accountButton: {
              text: 'Account',
              click: function() {
                window.location.href = "{{ url_for('account.management') }}";
              }
            },
            logoutButton: {
              text: 'Log Out',
              click: function() {
                window.location.href = "{{ url_for('account.logout') }}";
              }
            },
            addEventButton: {
              text: 'Add Event',
              click: function() {
                $('#addEventModal').modal('show'); 
              }
            },
            monthButton: {
              text: 'Month',
              click: function() {
                calendar.changeView('dayGridMonth');
              }
            },
            weekButton: {
              text: 'Week',
              click: function() {
                calendar.changeView('timeGridWeek');
              }
            },
            dayButton: {
              text: 'Day',
              click: function() {
                calendar.changeView('timeGridDay');
              }
            },
          },
          headerToolbar: {
            left: 'monthButton,weekButton,dayButton addEventButton',
            center: 'title',
            right: 'prev,next accountButton,logoutButton'
          },
          initialView: 'dayGridMonth',
          events : [
            {% for event in events %}
            {
              title : '{{event.name}}',
              start : '{{event.startdate}}',
              end : '{{event.enddate}}',
            },
            {% endfor %}
          ]
        });
        calendar.render();
      });
    </script>
	</head>
	<body>
		<div id='calendar'></div>
    {% include 'addeventmodal.html' %}
    {{ error }}
	</body>
</html>